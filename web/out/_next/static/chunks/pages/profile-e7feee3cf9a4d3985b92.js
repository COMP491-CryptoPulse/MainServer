_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{"8QMV":function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return c("dmPs")}])},dmPs:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return N}));var n=c("nKUr"),r=c("y5kw"),s=c("HEOa"),l=c("q1tI"),a=c("LcVh"),i=c("v7au"),o=c("0PHq"),d=function(e){var t=e.followType,c=e.followTarget,r=Object(s.d)(),a=r.user,d=r.updateUser,j=r.areNotificationsOn,u=Object(l.useState)(!1),b=u[0],x=u[1];return Object(l.useEffect)((function(){x(!1)}),[a]),Object(n.jsx)(o.a,{onClick:function(){return x(!0),void d("follow/update",{type:t,target:c,notify:!j(t,c)})},textColor:j(t,c)?"green-400":"yellow-400",fullWidth:!0,isDisabled:function(){return b},size:"lg",children:j(t,c)?Object(n.jsx)(i.c,{}):Object(n.jsx)(i.d,{})})},j=c("vU+/"),u=c("6lE0"),b=(c("YFqc"),c("PRV2")),x=c("RW2Z"),O=(c("ji1o"),c("lC1J")),f=function(e){var t=e.trigger,c=Object(s.d)().updateUser,r=Object(l.useCallback)((function(){c("trigger/delete",{id:t.id})}),[c,t]),a=Object(l.useCallback)((function(e){c("trigger/update",{id:t.id,time_window:e})}),[c,t]),i=Object(l.useCallback)((function(e){console.log(e),c("trigger/update",{id:t.id,threshold:e})}),[c,t]);return Object(n.jsxs)("div",{className:"flex flex-row items-center justify-between rounded px-4 py-2 bg-gray-900",children:[Object(n.jsxs)("div",{className:"flex flex-row justify-center items-center space-x-1",children:[Object(n.jsx)(b.c,{}),Object(n.jsx)("div",{children:"Notify when the posts increase by"}),Object(n.jsx)("div",{children:Object(n.jsx)(O.a,{options:["0%","1%","5%","10%","15%","20%","50%"],selected:t.threshold+"%",setSelected:function(e){return i(e.substring(0,e.length-1))}})}),Object(n.jsx)("div",{children:"within the last "}),Object(n.jsx)("div",{children:Object(n.jsx)(O.a,{options:["5m","10m","30m","1h","5h","12h","1d"],selected:t.time_window,setSelected:a})})]}),Object(n.jsx)("div",{className:"text-base",children:Object(n.jsx)("button",{onClick:r,className:"text-gray-700 hover:text-white",children:Object(n.jsx)(x.b,{})})})]})},h=c("Tgqd"),p=function(e){var t=e.follow,c=Object(s.d)().updateUser,r=Object(l.useState)(!1),i=r[0],x=r[1],O=Object(l.useMemo)((function(){return"source"===t.type&&!t.target.startsWith("*@")})),p=Object(l.useMemo)((function(){return"coin"===t.type?t.target.toUpperCase():O?t.target:Object(a.h)(t.target)[1]}),[t]),g=Object(l.useMemo)((function(){return"coin"===t.type?Object(a.b)(t.target):Object(a.f)(t.target)}),[t.type,t.target]),m=Object(l.useMemo)((function(){return"coin"===t.type?Object(a.c)(t.target):Object(a.g)(t.target)}),[t.type,t.target]),w=Object(l.useCallback)((function(e){c("trigger/create",{follow_id:e})}),[c]);return Object(n.jsxs)(u.a,{colorizer:function(){return"gray-850"},hoverColorizer:function(){return"gray-850"},aligned:!1,children:[Object(n.jsx)(u.a.Left,{}),Object(n.jsx)(u.a.Middle,{children:Object(n.jsxs)("div",{className:"flex flex-col space-y-2 text-xs text-".concat("gray-500"," p-2"),children:[Object(n.jsxs)("div",{className:"flex flex-row justify-center items-center space-x-2 \n                            text-lg text-".concat(g),children:[m,Object(n.jsx)("span",{className:"text-base truncate",children:p}),Object(n.jsx)("div",{className:"flex-grow"}),Object(n.jsxs)("div",{className:"flex flex-row space-x-2",children:[!O&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.a,{onClick:function(){return x(!i)},color:"".concat(i?"gray-900":"gray-780"),children:Object(n.jsxs)("div",{className:"flex flex-row space-x-1 items-center",children:[Object(n.jsx)("span",{children:Object(n.jsx)(b.c,{})}),Object(n.jsx)("span",{children:t.triggers.length}),Object(n.jsx)("span",{children:"triggers"})]})}),Object(n.jsx)(d,{followType:t.type,followTarget:t.target})]}),Object(n.jsx)(j.a,{followType:t.type,followTarget:t.target})]})]}),i&&!O&&Object(n.jsx)("div",{className:"flex flex-col space-y-2 lex-none",children:Object(n.jsxs)("div",{className:"flex flex-col space-y-1 max-h-36 overflow-scroll",children:[t.triggers.map((function(e){return Object(n.jsx)(f,{trigger:e})})),t.triggers.length<3&&Object(n.jsx)("div",{className:"flex flex-row text-sm justify-center items-center space-x-1 rounded py-2 bg-gray-900",children:Object(n.jsxs)("button",{className:"flex flex-row items-center space-x-1 hover:text-white",onClick:function(){return w(t.id)},children:[Object(n.jsx)(h.b,{}),Object(n.jsx)("span",{children:"New"})]})})]})})]})}),Object(n.jsx)(u.a.Right,{})]})},g=function(e){var t=e.children,c=e.options,r=e.width,s=void 0===r?"full":r,a=Object(l.useState)(0),i=a[0],o=a[1];return Object(n.jsxs)("div",{className:"flex flex-col space-y-2 w-".concat(s),children:[Object(n.jsx)("div",{className:"flex flex-row space-x-2",children:c.map((function(e,t){return Object(n.jsx)("button",{onClick:function(){return o(t)},className:"py-2 px-4 ".concat(i===t?"bg-gray-800":"opacity-70"," \n                          hover:opacity-100 rounded"),children:e})}))}),Object(n.jsx)("div",{children:t.map((function(e,t){return Object(n.jsx)("div",{className:"".concat(t!==i&&"hidden"),children:e})}))})]})},m=function(e){var t=e.options,c=e.onChange,r=void 0===c?function(){}:c,s=Object(l.useState)(0),a=s[0],i=s[1];return Object(l.useEffect)((function(){r(a)}),[a]),Object(n.jsx)("div",{className:"flex flex-col space-y-2",children:t.map((function(e,t){return Object(n.jsx)("button",{onClick:function(){return i(t)},className:"py-2 px-4 ".concat(a===t?"bg-gray-800":"opacity-70"," \n                          hover:opacity-100 rounded text-left"),children:e})}))})},w=function(e){var t=e.children,c=e.index;return t.map((function(e,t){return Object(n.jsx)("div",{className:"".concat(t!==c&&"hidden"),children:e})}))},y=c("ODXe"),v=function(e){var t=e.label,c=e.placeholder,r=e.type,s=e.errorMsg,a=e.isDisabled,i=void 0!==a&&a,o=e.checker,d=void 0===o?function(){return[!0,null]}:o,j=e.setCorrectValue,u=Object(l.useState)(""),b=u[0],x=u[1],O=Object(l.useState)(!1),f=O[0],h=O[1],p=Object(l.useState)(!0),g=p[0],m=p[1],w=Object(l.useState)(""),v=w[0],N=w[1];return Object(l.useEffect)((function(){if(f&&!g){var e=d(b),t=Object(y.a)(e,2),c=t[0],n=t[1];c?(N(""),j(b)):(N(n),j(null))}})),Object(l.useEffect)((function(){m(!0),N(s)}),[s]),Object(l.useEffect)((function(){m(!1)}),[b]),Object(n.jsxs)("div",{class:"flex flex-col space-y-2",children:[Object(n.jsxs)("label",{className:"block text-700 text-md font-bold mb-2",children:[t,Object(n.jsx)("input",{type:r,placeholder:c,onFocus:function(){return h(!0)},disabled:i,value:b,onChange:function(e){return x(e.currentTarget.value)},className:"mt-1 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight\n            ".concat(""!==v?"border-red-500":null)})]}),Object(n.jsx)("p",{class:"text-red-500 text-xs italic mt-2 ml-1",children:v})]})};function N(){Object(s.c)();var e=Object(s.d)(),t=e.username,c=e.email,a=e.followedCoins,i=e.followedSources,o=e.delete_user,d=(e.updateUser,e.change_email),j=e.change_password,u=Object(l.useMemo)((function(){return i.filter((function(e){return e.target.startsWith("*@")}))}),[i]),b=Object(l.useMemo)((function(){return i.filter((function(e){return!e.target.startsWith("*@")}))}),[i]),x=Object(l.useState)(null),O=x[0],f=x[1],h=Object(l.useState)(null),y=h[0],N=h[1],C=Object(l.useState)(null),k=C[0],S=C[1],P=Object(l.useState)(!1),E=P[0],M=(P[1],Object(l.useState)(null)),_=M[0],D=M[1],T=Object(l.useState)(""),V=T[0],H=T[1],U=Object(l.useState)(""),Y=U[0],q=U[1],A=Object(l.useState)(""),B=A[0],F=A[1],L=Object(l.useState)(""),z=L[0],I=L[1],R=Object(l.useCallback)((function(e){return""===e?[!1,"This field is required."]:e.length<5?[!1,"Too short."]:[!0,null]}),[]),W=Object(l.useCallback)((function(e){return[/^\S+@\S+$/.test(e.toLowerCase()),"Invalid e-mail."]}),[]),J=Object(l.useMemo)((function(){return y&&k}),[y,k]),K=Object(l.useMemo)((function(){return y&&_}),[y,_]),Q=Object(l.useState)(0),X=Q[0],G=Q[1],Z=Object(l.useCallback)((function(e){e.preventDefault(),j(O,y,(function(e){F("Password changed.")}),(function(e){I("You have entered your current password wrong.")}))}),[J,y,O]),$=Object(l.useCallback)((function(e){e.preventDefault(),d(y,_,(function(e){q("Email changed.")}),(function(e){H("Email cannot be changed.")}))}),[K,y,_]);return Object(n.jsx)("div",{className:"animate-fade-in-down",children:Object(n.jsxs)("div",{className:"flex flex-row pt-2 space-x-2 justify-center",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)(r.a,{collapsable:!1,children:[Object(n.jsx)(r.a.Header,{}),Object(n.jsx)(r.a.Body,{children:Object(n.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[Object(n.jsx)("img",{style:{"border-radius":"50%"},width:64,height:64,src:"https://kstu.edu.tr/kstu-file/uploads/default-user-image.png"}),Object(n.jsx)("div",{children:t})]})})]}),Object(n.jsxs)(r.a,{collapsable:!1,children:[Object(n.jsx)(r.a.Header,{children:"Menu"}),Object(n.jsx)(r.a.Body,{children:Object(n.jsx)(m,{options:["Notification Settings","Account Settings","Delete Your Account"],onChange:G})})]})]}),Object(n.jsx)("div",{className:"w-128",children:Object(n.jsxs)(w,{index:X,children:[Object(n.jsxs)(r.a,{restrictedHeight:!1,collapsable:!1,children:[Object(n.jsx)(r.a.Header,{children:"Notification Settings"}),Object(n.jsx)(r.a.Body,{children:Object(n.jsxs)(g,{options:["Followed Coins","Followed Groups","Followed Users"],children:[Object(n.jsx)("div",{children:a.length>0?a.map((function(e){return Object(n.jsx)("div",{className:"mt-2",children:Object(n.jsx)(p,{follow:e})})})):"Not following any coins."}),Object(n.jsx)("div",{children:u.length>0?u.map((function(e){return Object(n.jsx)("div",{className:"mt-2",children:Object(n.jsx)(p,{follow:e})})})):"Not following any groups."}),Object(n.jsx)("div",{children:b.length>0?b.map((function(e){return Object(n.jsx)("div",{className:"mt-2",children:Object(n.jsx)(p,{follow:e})})})):"Not following any users."})]})})]}),Object(n.jsxs)(r.a,{restrictedHeight:!1,collapsable:!1,children:[Object(n.jsx)(r.a.Header,{children:"Account Settings"}),Object(n.jsx)(r.a.Body,{children:Object(n.jsxs)(g,{options:["Change Email","Change Password"],children:[Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:$,children:[""!==Y?Object(n.jsx)("div",{class:"animate-fade-in-down bg-green-100 border border-green-400 text-sm text-green-700 px-4 py-3 mb-3 rounded relative",role:"alert",children:Y}):null,""!==V?Object(n.jsx)("div",{class:"animate-fade-in-down bg-red-100 border border-red-400 text-sm text-red-700 px-4 py-3 mb-3 rounded relative",role:"alert",children:V}):null,Object(n.jsxs)("div",{className:"block text-700 text-md font-bold mb-2",children:["Your email: ",c," "]}),Object(n.jsx)(v,{type:"text",label:"Enter New E-mail",placeholder:"New e-mail",errorMsg:"",isDisabled:E,checker:W,setCorrectValue:D}),Object(n.jsx)(v,{type:"password",label:"Enter Password",placeholder:"Your password",errorMsg:"",isDisabled:E,checker:R,setCorrectValue:N}),Object(n.jsx)("button",{type:"submit",disabled:!K||E,class:"w-full bg-yellow-50 text-blue-50 h-10 py-2 px-4 text-center rounded disabled:opacity-50 hover:bg-yellow-500",children:E?Object(n.jsx)(AiOutlineLoading,{className:"animate-spin"}):"Change Email"})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:Z,children:[""!==B?Object(n.jsx)("div",{class:"animate-fade-in-down bg-green-100 border border-green-400 text-sm text-green-700 px-4 py-3 mb-3 rounded relative",role:"alert",children:B}):null,""!==z?Object(n.jsx)("div",{class:"animate-fade-in-down bg-red-100 border border-red-400 text-sm text-red-700 px-4 py-3 mb-3 rounded relative",role:"alert",children:z}):null,Object(n.jsx)(v,{type:"password",label:"Enter Old Password",placeholder:"Old password",errorMsg:"",isDisabled:E,checker:R,setCorrectValue:f}),Object(n.jsx)(v,{type:"password",label:"Enter New Password",placeholder:"New password",errorMsg:"",isDisabled:E,checker:function(e){return[e!==O,"Your new password cannot be same as your old password"]},setCorrectValue:N}),Object(n.jsx)(v,{type:"password",label:"Password (again)",placeholder:"Re-enter your new password",errorMsg:"",isDisabled:E,checker:function(e){return[e===y,"Passwords do not match"]},setCorrectValue:S}),Object(n.jsx)("button",{type:"submit",disabled:!J||E,class:"w-full bg-yellow-50 text-blue-50 h-10 py-2 px-4 text-center rounded disabled:opacity-50 hover:bg-yellow-500",children:E?Object(n.jsx)(AiOutlineLoading,{className:"animate-spin"}):"Change Password"})]})})]})})]}),Object(n.jsxs)(r.a,{restrictedHeight:!1,collapsable:!1,children:[Object(n.jsx)(r.a.Header,{children:"Delete Your Account"}),Object(n.jsxs)(r.a.Body,{children:[Object(n.jsx)("div",{children:"Your account will be deleted permanently."}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"bg-yellow-50 text-blue-50 py-2 px-4 my-5 rounded",onClick:o,children:"Delete Account"})})]})]})]})})]})})}},ji1o:function(e,t,c){"use strict";c.d(t,"a",(function(){return l}));var n=c("nKUr"),r=c("q1tI"),s=c("PRV2"),l=function(e){var t=e.options,c=e.selected,l=e.setSelected,a=void 0===l?function(){}:l,i=Object(r.useMemo)((function(){return t.findIndex((function(e){return e===c}))}),[t,c]),o=Object(r.useCallback)((function(){var e=(i+1)%t.length;a(t[e])}),[i,c]);return t&&c&&a&&Object(n.jsx)("div",{children:Object(n.jsxs)("button",{type:"button",className:"flex z-0 items-center px-2 py-1 rounded-md \n                        bg-".concat("gray-800"," text-").concat("gray-200"," hover:bg-").concat("gray-700"),onClick:o,children:[Object(n.jsx)("span",{children:"descending"===c?Object(n.jsx)(s.e,{}):"ascending"===c?Object(n.jsx)(s.d,{}):null}),Object(n.jsx)("span",{children:c})]})})}},lC1J:function(e,t,c){"use strict";c.d(t,"a",(function(){return u}));var n=c("nKUr"),r=c("rePB"),s=c("q1tI"),l=c("pGKQ");function a(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function i(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?a(Object(c),!0).forEach((function(t){Object(r.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var o="gray-800",d="gray-700",j="gray-200",u=function(e){var t=e.options,c=e.selected,r=e.setSelected,a=Object(s.useState)(!1),u=a[0],b=a[1],x=Object(l.c)({isOpen:u,onOutsideClick:function(){return b(!1)},placement:"bottom-center",triggerOffset:8}),O=x.triggerProps,f=x.layerProps,h=x.arrowProps,p=x.renderLayer;return t&&c&&r&&Object(n.jsxs)("div",{className:"relative inline-block text-left text-xs",children:[Object(n.jsx)("div",{children:Object(n.jsx)("button",i(i({},O),{},{type:"button",className:"flex items-center px-2 py-1 rounded-md bg-".concat(o," text-").concat(j," hover:bg-").concat(d),onClick:function(){return b(!u)},children:Object(n.jsx)("span",{children:c})}))}),u&&p(Object(n.jsxs)("div",i(i({},f),{},{className:"z-50",children:[Object(n.jsx)("div",{className:"flex flex-col w-24 shadow-lg text-xs text-".concat(j," rounded-lg overflow-hidden"),children:t.filter((function(e){return e!==c})).map((function(e){return Object(n.jsx)("button",{onClick:function(){b(!1),r(e)},className:"px-3 py-2 bg-".concat(o," hover:bg-").concat(d),children:e})}))}),Object(n.jsx)(l.a,i({backgroundColor:"rgb(33,41,54)"},h))]})))]})}}},[["8QMV",0,2,5,6,7,9,8,12,1,3,10,11,15]]]);